{% load static %}
<section id="about" class="section section-a fullscreen-h-lg">
    <div class="section-title title-anim">
      <div data-anim-visible='zoom-in'>
        <h2 class="text">О нас</h2>
      </div>
    </div>
    <!-- Begin of section body -->
    <div class="section-body">
      <!-- content -->
      <div class="section-content container content-width anim">
        <div class="row">
          <div class="col-12 col-lg-8 text-left">
            <!-- title and description -->
            <div class="title-desc">
              <h2 class="display-3 anim-1 mb-4" data-anim-visible='fade'>{{about_index.title}}</h2>
              <div class="anim-2" data-anim-visible='fade'>
                <p>{{about_index.descriptions|safe}}</p>

              </div>
            </div>

          </div>
          <!-- Right side: Numbers -->
          <div class="col-12 col-lg-4 mt-5 mt-lg-0">
            <div class="stats-card anim-2" data-anim-visible='fade'>
              <div class="stats-header d-flex align-items-center justify-content-between mb-3">
                <h3 class="h4 m-0">Мы в числах</h3>
              </div>
              <div class="stats-list">
                {% if numbers %}
                  {% for item in numbers %}
                  <div class="stat d-flex align-items-start">
                    <div class="stat-icon me-3">
                      <i class="fa {{ item.icon }}"></i>
                    </div>
                    <div class="stat-body">
                      <div class="stat-top d-flex align-items-baseline gap-2 flex-wrap">
                        <span class="stat-number" data-count="{{ item.number }}">{{ item.number }}</span>
                        <span class="stat-title">{{ item.title }}</span>
                      </div>
                      {% if item.descriptions %}
                      <div class="stat-desc">{{ item.descriptions }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endfor %}
                {% else %}
                  <!-- Fallback test data -->
                  <div class="stat d-flex align-items-start">
                    <div class="stat-icon me-3"><i class="fa fa-users"></i></div>
                    <div class="stat-body">
                      <div class="stat-top d-flex align-items-baseline gap-2 flex-wrap">
                        <span class="stat-number" data-count="250">250+</span>
                        <span class="stat-title">Довольных клиентов</span>
                      </div>
                      <div class="stat-desc">Нам доверяют компании и частные заказчики.</div>
                    </div>
                  </div>
                  <div class="stat d-flex align-items-start">
                    <div class="stat-icon me-3"><i class="fa fa-scissors"></i></div>
                    <div class="stat-body">
                      <div class="stat-top d-flex align-items-baseline gap-2 flex-wrap">
                        <span class="stat-number" data-count="10000">10 000+</span>
                        <span class="stat-title">Сшитых изделий</span>
                      </div>
                      <div class="stat-desc">От уникальных образцов до серийных партий.</div>
                    </div>
                  </div>
                  <div class="stat d-flex align-items-start">
                    <div class="stat-icon me-3"><i class="fa fa-check"></i></div>
                    <div class="stat-body">
                      <div class="stat-top d-flex align-items-baseline gap-2 flex-wrap">
                        <span class="stat-number" data-count="7">7 лет</span>
                        <span class="stat-title">Опыт работы</span>
                      </div>
                      <div class="stat-desc">Команда профессионалов с современным оборудованием.</div>
                    </div>
                  </div>
                  <div class="stat d-flex align-items-start">
                    <div class="stat-icon me-3"><i class="fa fa-trophy"></i></div>
                    <div class="stat-body">
                      <div class="stat-top d-flex align-items-baseline gap-2 flex-wrap">
                        <span class="stat-number" data-count="99">99%</span>
                        <span class="stat-title">Сроки в срок</span>
                      </div>
                      <div class="stat-desc">Строго соблюдаем дедлайны и контроль качества.</div>
                    </div>
                  </div>
                {% endif %}
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
    <!-- End of section body -->

  </section>
  <style>
    /* Scoped styles for numbers sidebar */
    .stats-card {
      background: transparent;
      border: 0;
      border-radius: 14px;
      padding: 8px;
    }
    .stats-header .h4 { color: #fff; letter-spacing: .3px; opacity: .9; }
    .stats-list { display: grid; gap: 12px; }
    .stat {
      position: relative;
      padding: 12px 12px 12px 16px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.03);
      transition: background .25s ease, transform .25s ease, box-shadow .25s ease, border-color .25s ease;
      overflow: hidden;
      animation: stat-fade-up .5s ease both;
    }
    .stat::before {
      content: "";
      position: absolute;
      left: 0; top: 0; bottom: 0;
      width: 4px;
      background: linear-gradient(180deg, #00ADB5, #006494);
      opacity: .9;
    }
    .stat:hover {
      background: rgba(255,255,255,0.06);
      border-color: rgba(255,255,255,0.18);
      box-shadow: 0 10px 24px rgba(0,0,0,.28);
      transform: translateY(-2px);
    }
    .stat-icon {
      width: 42px; height: 42px; border-radius: 10px;
      display: grid; place-items: center; flex: 0 0 42px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
    }
    .stat-icon i { font-size: 20px; color: #fff; opacity: .95; }
    .stat-number {
      font-size: 30px; font-weight: 900; line-height: 1;
      background: linear-gradient(135deg, #ffffff, #d7f9ff 60%, #9ee7f0);
      -webkit-background-clip: text; background-clip: text; color: transparent;
      text-shadow: 0 0 18px rgba(0, 173, 181, .15);
    }
    .stat-title { font-size: 14px; color: rgba(255,255,255,0.85); margin-left: 6px; letter-spacing: .2px; }
    .stat-desc { font-size: 12px; color: rgba(255,255,255,0.68); margin-top: 6px; }
    @keyframes stat-fade-up { from { opacity: 0; transform: translateY(10px);} to { opacity: 1; transform: translateY(0);} }
    .stats-list .stat:nth-child(1) { animation-delay: .02s; }
    .stats-list .stat:nth-child(2) { animation-delay: .08s; }
    .stats-list .stat:nth-child(3) { animation-delay: .14s; }
    .stats-list .stat:nth-child(4) { animation-delay: .2s; }
    @media (max-width: 991.98px) {
      .stats-card { margin-top: 20px; }
      .stat-number { font-size: 26px; }
    }
  </style>

  <script>
    (function() {
      const easeOutCubic = t => 1 - Math.pow(1 - t, 3);
      function animateNumber(el) {
        if (el.dataset.counted === '1') return;
        const target = parseFloat(el.dataset.count || '0');
        const original = (el.textContent || '').trim();
        const suffixMatch = original.match(/[^0-9.,\s]+|[+%]+/g);
        const suffix = suffixMatch ? suffixMatch.join('') : '';
        const duration = 1200;
        const start = performance.now();
        el.dataset.counted = '1';
        function frame(now) {
          const t = Math.min(1, (now - start) / duration);
          const val = Math.floor(easeOutCubic(t) * target);
          // format with thousand spaces
          const formatted = val.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
          el.textContent = suffix === '%' ? formatted + '%' : formatted + (suffix ? ' ' + suffix : '');
          if (t < 1) requestAnimationFrame(frame);
        }
        requestAnimationFrame(frame);
      }
      const nums = document.querySelectorAll('.stats-card .stat-number[data-count]');
      if ('IntersectionObserver' in window) {
        const io = new IntersectionObserver((entries) => {
          entries.forEach(e => { if (e.isIntersecting) { animateNumber(e.target); io.unobserve(e.target); } });
        }, { threshold: 0.4 });
        nums.forEach(n => io.observe(n));
      } else {
        nums.forEach(animateNumber);
      }
    })();
  </script>

<!-- Begin of services section -->
<section id="services" class="section section-a fullscreen-h-lg">

    <div class="section-title title-anim">
      <div data-anim-visible='zoom-in'>
        <h2 class="text">Почему мы лучше</h2>
      </div>
    </div>
    <!-- Begin of section body -->
    <div class="section-body">
      <!-- content -->
      <div class="section-content container content-width anim">

        <div class="row">
          <div class="col col-12 col-lg-12">
            <!-- item list -->
            <div class="item-list row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 anim-list">
              {% for about_service in about_index.about_service.all %}
              <div class="col">
                <!-- an item -->
                <div class="item item-feature-a" data-anim-visible='fade'>
                  <div class="img">
                    <div class="icon">
                      <i class="fa {{ about_service.icon }}"></i>
                    </div>
                  </div>
                  <div class="item-body">
                    <h4>{{about_service.title}}</h4>
                    <p>{{about_service.subtitle}}</p>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
            <!-- end of service list -->

            <!--  another item list -->
            <div class="item-list row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 mt-5 anim-1">
              <div class="col">
                <!-- an item -->
                <div class="item item-feature-b" data-anim-visible='fade'>
                  <div class="img">
                    <div class="icon">
                      <i class="icon ion-ios-bulb"></i>
                    </div>
                  </div>
                  <div class="item-body">
                    <h4>Modern</h4>
                    <p>Advanced option</p>
                  </div>
                </div>
              </div>

              <div class="col">
                <!-- an item -->
                <div class="item item-feature-b" data-anim-visible='fade'>
                  <div class="img">
                    <div class="icon">
                      <i class="icon ion-ios-bulb"></i>
                    </div>
                  </div>
                  <div class="item-body">
                    <h4>Customizable</h4>
                    <p>An available option</p>
                  </div>
                </div>
              </div>
              <div class="col">
                <!-- an item -->
                <div class="item item-feature-b" data-anim-visible='fade'>
                  <div class="img">
                    <div class="icon">
                      <i class="icon ion-ios-bulb"></i>
                    </div>
                  </div>
                  <div class="item-body">
                    <h4>Flexible</h4>
                    <p>Many other options</p>
                  </div>
                </div>
              </div>

            </div>
            <!-- end of another item list -->
          </div>
        </div>
      </div>
    </div>
    <!-- End of section body -->

  </section>